# Build stage
FROM node:18 AS builder

WORKDIR /app
COPY webapp_frontend /app
# üëá –ü–æ–¥–º–µ–Ω—è–µ–º .env.prod –Ω–∞ .env –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º —Å–±–æ—Ä–∫–∏
COPY webapp_frontend/.env.prod /app/.env

RUN npm install && npm run build

# Nginx stage
FROM nginx:stable-alpine

COPY --from=builder /app/dist /usr/share/nginx/html
COPY webapp_frontend/nginx.conf /etc/nginx/conf.d/default.conf